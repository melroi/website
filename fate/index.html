<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Fate Strange Fake Countdown</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: linear-gradient(45deg, magenta, cyan, yellow, lime);
      font-family: "Comic Sans MS", "Papyrus", cursive;
      color: #000;
      height: 100vh;
      width: 100vw;
    }

    #countdown {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.7);
      padding: 15px 30px;
      border: 5px dashed black;
      font-size: 2em;
      z-index: 1000;
      text-align: center;
    }

    canvas {
      display: block;
    }
  </style>
</head>
<body>
  <div id="countdown">Chargement...</div>
  <canvas id="canvas"></canvas>

  <script>
    // ====== Countdown ======
    function updateCountdown() {
      const target = new Date("2025-01-03T00:00:00");
      const now = new Date();
      const diff = target - now;

      if (diff <= 0) {
        document.getElementById("countdown").textContent = "C'est sorti !!!";
        return;
      }

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);

      document.getElementById("countdown").textContent =
        `${days}j ${hours}h ${minutes}m ${seconds}s avant Fate Strange Fake`;
    }
    setInterval(updateCountdown, 1000);
    updateCountdown();

    // ====== DVD Logo Bounce ======
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const countdownBox = document.getElementById("countdown").getBoundingClientRect();

    let images = [];
    const img = new Image();
    img.src = "image1.jpg"; // Ton image DVD

    function spawnImage() {
      const size = 100;
      let x = Math.random() * (canvas.width - size);
      let y = Math.random() * (canvas.height - size);

      // éviter la zone countdown
      if (
        x < countdownBox.right &&
        x + size > countdownBox.left &&
        y < countdownBox.bottom &&
        y + size > countdownBox.top
      ) {
        y = countdownBox.bottom + 20; 
      }

      images.push({
        x, y,
        dx: (Math.random() * 4 + 2) * (Math.random() < 0.5 ? -1 : 1),
        dy: (Math.random() * 4 + 2) * (Math.random() < 0.5 ? -1 : 1),
        size,
        angle: 0,
      });
    }

    img.onload = () => {
      spawnImage();
      animate();
    };

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      for (let i = 0; i < images.length; i++) {
        let logo = images[i];

        logo.x += logo.dx;
        logo.y += logo.dy;
        logo.angle += 0.05;

        // rebond sur murs
        if (logo.x <= 0 || logo.x + logo.size >= canvas.width) logo.dx *= -1;
        if (logo.y <= 0 || logo.y + logo.size >= canvas.height) logo.dy *= -1;

        // éviter zone countdown
        if (
          logo.x < countdownBox.right &&
          logo.x + logo.size > countdownBox.left &&
          logo.y < countdownBox.bottom &&
          logo.y + logo.size > countdownBox.top
        ) {
          logo.dy *= -1;
          logo.y = countdownBox.bottom + 5;
        }

        // collisions entre images
        for (let j = i + 1; j < images.length; j++) {
          let other = images[j];
          let dx = logo.x - other.x;
          let dy = logo.y - other.y;
          let dist = Math.sqrt(dx*dx + dy*dy);
          if (dist < logo.size) {
            logo.dx *= -1;
            logo.dy *= -1;
            other.dx *= -1;
            other.dy *= -1;
          }
        }

        // dessiner image
        ctx.save();
        ctx.translate(logo.x + logo.size/2, logo.y + logo.size/2);
        ctx.rotate(logo.angle);
        ctx.drawImage(img, -logo.size/2, -logo.size/2, logo.size, logo.size);
        ctx.restore();
      }

      requestAnimationFrame(animate);
    }

    // Ajouter une image si on appuie sur Entrée
    document.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        spawnImage();
      }
    });

    window.addEventListener("resize", () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });
  </script>
</body>
</html>